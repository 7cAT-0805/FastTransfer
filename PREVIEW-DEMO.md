# 檔案預覽功能測試指南

## 🎯 功能概覽

FastTransfer 檔案預覽功能現已完全優化，支援多種檔案類型的高品質預覽。

## 📋 支援的檔案類型

### 🖼️ 圖片檔案
- **格式**: JPG, PNG, GIF, WebP, SVG, BMP
- **功能**: 
  - 完美居中顯示
  - R 鍵旋轉功能
  - 高品質縮放
  - 載入動畫

### 🎬 影片檔案
- **格式**: MP4, WebM, OGG, AVI, MOV
- **功能**:
  - 內建播放控制
  - 自適應大小
  - 預載入後設資料

### 🎵 音頻檔案
- **格式**: MP3, WAV, OGG, M4A, AAC
- **功能**:
  - 優雅的播放介面
  - 檔案資訊顯示
  - 完整播放控制

### 📄 文件檔案
- **格式**: PDF, TXT, MD, JSON, HTML, CSS, JS
- **功能**:
  - 內嵌預覽
  - 語法高亮（程式碼）

### 📊 Office 文件
- **格式**: Word, Excel, PowerPoint
- **功能**:
  - 提示下載開啟
  - 檔案資訊展示

## 🚀 快速測試

### 使用開發者模式測試
1. 開啟瀏覽器開發者工具 (F12)
2. 在控制台輸入：`DevMode_7cAT(5168)`
3. 進入房間頁面
4. 使用開發者面板添加測試檔案

### 測試不同檔案類型
```javascript
// 在開發者控制台執行
window.devMode.addMockFile(); // 隨機添加測試檔案
```

## 🎮 操作說明

### 預覽控制
- **ESC 鍵**: 關閉預覽
- **R 鍵**: 旋轉圖片（僅圖片）
- **滑鼠點擊背景**: 關閉預覽
- **下載按鈕**: 下載檔案

### 全螢幕預覽
- 所有預覽都使用真正的全螢幕模式
- 內容自動居中顯示
- 支援所有螢幕尺寸

## 🔧 技術細節

### 預覽 URL 處理
```javascript
// 檔案預覽 URL 格式
previewUrl: `/api/rooms/${roomId}/files/${fileId}`
```

### 音頻播放優化
- 預載入後設資料
- 自定義播放器樣式
- 錯誤處理與重試

### 圖片顯示優化
- 物件適配 (object-fit: contain)
- 最大尺寸限制 (95vw × 85vh)
- 旋轉變換效果

## 🐛 故障排除

### 圖片無法顯示
1. 檢查檔案是否存在
2. 驗證 URL 路徑
3. 查看瀏覽器控制台錯誤

### 音頻無法播放
1. 確認瀏覽器支援該格式
2. 檢查檔案完整性
3. 測試不同音頻格式

### 預覽不全螢幕
1. 檢查 CSS 樣式載入
2. 驗證 z-index 設定
3. 清除瀏覽器快取

## 📱 響應式設計

- **桌面**: 完整功能
- **平板**: 觸控優化
- **手機**: 手勢支援

## 🎨 UI/UX 特色

- 毛玻璃效果背景
- 平滑動畫過渡
- 現代化操作介面
- 直覺的操作提示

---

*更新時間：2025年6月13日*
